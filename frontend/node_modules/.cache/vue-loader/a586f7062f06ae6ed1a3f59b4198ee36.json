{"remainingRequest":"/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/src/components/Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/src/components/Home.vue","mtime":1574380476241},{"path":"/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/bnguyen/Documents/GitHub/golang/src/otherside/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFZ1ZXggZnJvbSAidnVleCI7CmltcG9ydCBjcmVhdGVQZXJzaXN0ZWRTdGF0ZSBmcm9tICJ2dWV4LXBlcnNpc3RlZHN0YXRlIjsKClZ1ZS51c2UoKQoKY29uc3Qgc3RvcmUgPSBuZXcgVnVleC5TdG9yZSh7CiAgcGx1Z2luczogW2NyZWF0ZVBlcnNpc3RlZFN0YXRlKCldCn0pOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdob21lJywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvY2FsRXZlbnRzOiBudWxsLAogICAgICBwbGF5bGlzdFN0YXR1czogbnVsbCwKICAgICAgc3BvdGlmeUF1dGhlbnRpY2F0aW9uVXJsOiBudWxsLAogICAgICBzcG90aWZ5U3RhdGVTdHJpbmc6IG51bGwsCiAgICAgIHNlbGVjdGVkQ2l0aWVzOiBudWxsLAogICAgICBhdmFpbGFibGVDaXRpZXM6IG51bGwsCiAgICAgIHNlbGVjdGVkR2VucmVzOiBudWxsLAogICAgICBhdmFpbGFibGVHZW5yZXM6IG51bGwsCiAgICAgIHRvcFRyYWNrczogbnVsbCwKICAgICAgYXJ0aXN0SURzOiBudWxsCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuc2V0TmV3U3BvdGlmeUF1dGhlbnRpY2F0aW9uVXJsKCk7CiAgICB0aGlzLmdldEF2YWlsYWJsZUNpdGllcygpOwogICAgdGhpcy5nZXRBdmFpbGFibGVHZW5yZXMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRyYW5zZmVyQXJyYXlWYWx1ZTogZnVuY3Rpb24oc291cmNlQXJyYXksIHRhcmdldEFycmF5LCB2YWx1ZSkgewogICAgICB2YXIgaW5kZXggPSBzb3VyY2VBcnJheS5pbmRleE9mKHZhbHVlKTsKICAgICAgaWYgKGluZGV4ID4gLTEpIHsKICAgICAgICBpZiAoISh0YXJnZXRBcnJheSA9PSB0aGlzLnNlbGVjdGVkQ2l0aWVzICYmIHRhcmdldEFycmF5Lmxlbmd0aCA9PSA2KSAmJiAKICAgICAgICAhKHRhcmdldEFycmF5ID09IHRoaXMuc2VsZWN0ZWRHZW5yZXMgJiYgdGFyZ2V0QXJyYXkubGVuZ3RoID09IDEwKSkgewogICAgICAgICAgc291cmNlQXJyYXkuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgICAgIHRhcmdldEFycmF5LnB1c2godmFsdWUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDaXRpZXMubGVuZ3RoICE9IDAgJiYgdGhpcy5zZWxlY3RlZEdlbnJlcy5sZW5ndGggIT0gMCkgewogICAgICAgIHRoaXMuZ2V0TG9jYWxFdmVudHModGhpcy5zZWxlY3RlZENpdGllcywgdGhpcy5zZWxlY3RlZEdlbnJlcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2NhbEV2ZW50cyA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICBnZXRBdmFpbGFibGVDaXRpZXM6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgY2l0aWVzVVJMID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9jaXRpZXMiOwoKICAgICAgYXhpb3MuZ2V0KGNpdGllc1VSTCkKICAgICAgICAudGhlbigocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5hdmFpbGFibGVDaXRpZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgdGhpcy5zZWxlY3RlZENpdGllcyA9IG5ldyBBcnJheSgpOwogICAgICAgIH0pKTsKICAgIH0sCiAgICBnZXRBdmFpbGFibGVHZW5yZXM6IGZ1bmN0aW9uKCkgewogICAgICB2YXIgZ2VucmVzVVJMID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9nZW5yZXMiOwoKICAgICAgYXhpb3MuZ2V0KGdlbnJlc1VSTCkKICAgICAgICAudGhlbigocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5hdmFpbGFibGVHZW5yZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgdGhpcy5zZWxlY3RlZEdlbnJlcyA9IG5ldyBBcnJheSgpOwogICAgICAgIH0pKTsKICAgIH0sCiAgICBnZXRMb2NhbEV2ZW50czogZnVuY3Rpb24gKGNpdGllcywgZ2VucmVzKSB7CiAgICAgIHZhciBjaXR5U3RyaW5nID0gdGhpcy5hcnJheVRvUXVlcnlTdHJpbmcoY2l0aWVzKTsKICAgICAgdmFyIGdlbnJlU3RyaW5nID0gdGhpcy5hcnJheVRvUXVlcnlTdHJpbmcoZ2VucmVzKTsKCiAgICAgIHZhciBsb2NhbEV2ZW50c1VSTCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODEvbG9jYWxldmVudHM/Y2l0aWVzPSIgKwogICAgICBjaXR5U3RyaW5nICsKICAgICAgIiZnZW5yZXM9IiArCiAgICAgIGdlbnJlU3RyaW5nOwoKICAgICAgYXhpb3MuZ2V0KGxvY2FsRXZlbnRzVVJMKQogICAgICAgIC50aGVuKChyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLmxvY2FsRXZlbnRzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIHRoaXMuZ2V0QXJ0aXN0SURzKHRoaXMubG9jYWxFdmVudHMpOwogICAgICAgIH0pKTsKICAgIH0sCiAgICBzZXROZXdTcG90aWZ5QXV0aGVudGljYXRpb25Vcmw6IGZ1bmN0aW9uKCkgewogICAgICB0aGlzLnNwb3RpZnlTdGF0ZVN0cmluZyA9IHRoaXMuZ2V0UmFuZG9tU3RhdGVTdHJpbmcoKQoKICAgICAgdmFyIGdldEF1dGhlbnRpY2F0aW9uUmVxdWVzdFVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODEvYXV0aGVudGljYXRlP3N0YXRlPSIKICAgICAgKyAgdGhpcy5zcG90aWZ5U3RhdGVTdHJpbmc7CgogICAgICBheGlvcy5nZXQoZ2V0QXV0aGVudGljYXRpb25SZXF1ZXN0VXJsKQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMuc3BvdGlmeUF1dGhlbnRpY2F0aW9uVXJsID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KQogICAgfSwKICAgIGdldFJhbmRvbVN0YXRlU3RyaW5nOiBmdW5jdGlvbigpIHsKICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLDE1KSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLDE1KQogICAgfSwKICAgIHJlZGlyZWN0VG9VUkw6IGZ1bmN0aW9uKCkgewogICAgICB3aW5kb3cubG9jYXRpb24gPSB0aGlzLnNwb3RpZnlBdXRoZW50aWNhdGlvblVybDsKICAgIH0sCiAgICBhcnJheVRvUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIChhcnJheSkgewogICAgICB2YXIgcXVlcnlTdHJpbmcgPSAnWyc7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVlcnlTdHJpbmcgPSBxdWVyeVN0cmluZy5jb25jYXQoYXJyYXlbaV0gKyAnLCcpOwogICAgICB9CgogICAgICBxdWVyeVN0cmluZyA9IHF1ZXJ5U3RyaW5nLnNsaWNlKDAsIC0xKS5jb25jYXQoJ10nKTsKICAgICAgcmV0dXJuIHF1ZXJ5U3RyaW5nOwogICAgfSwKICAgIGdldEFydGlzdElEczogZnVuY3Rpb24oZXZlbnRzKSB7CiAgICAgIHZhciBhcnRpc3RJRHNVUkwgPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FydGlzdGlkcyI7CgogICAgICBheGlvcy5wb3N0KGFydGlzdElEc1VSTCwgSlNPTi5zdHJpbmdpZnkoZXZlbnRzKSkKICAgICAgICAudGhlbigocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5hcnRpc3RJRHMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0pKTsKICAgIH0sCiAgICBidWlsZFBsYXlsaXN0OiBmdW5jdGlvbiAobmFtZSwgZGVzYykgewogICAgICB2YXIgdG9wVHJhY2tzVVJMID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MS90b3B0cmFja3MiOwogICAgICB2YXIgYnVpbGRQbGF5bGlzdFVSTCA9ICJodHRwOi8vbG9jYWxob3N0OjgwODEvYnVpbGRwbGF5bGlzdD9uYW1lPSIgKwogICAgICAgIG5hbWUgKwogICAgICAgICImZGVzYz0iICsKICAgICAgICBkZXNjOwoKICAgICAgYXhpb3MucG9zdCh0b3BUcmFja3NVUkwsIEpTT04uc3RyaW5naWZ5KHRoaXMuYXJ0aXN0SURzKSkKICAgICAgICAudGhlbigocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy50b3BUcmFja3MgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgYXhpb3MucG9zdChidWlsZFBsYXlsaXN0VVJMLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhKSkKICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICB0aGlzLnBsYXlsaXN0U3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzOwogICAgICAgICAgfSkpOwogICAgICAgIH0pKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"home\">\n\n    <h2>HOME</h2>\n\n      <button v-on:click=\"redirectToURL\">Log In</button>\n\n    <h5>Selected Cities</h5>\n    <ul v-if=\"selectedCities\">\n      <li v-for=\"city in selectedCities\" v-bind:key=\"city\" v-on:click=\"transferArrayValue(selectedCities, availableCities, city)\">\n        {{city}}\n      </li>\n    </ul>\n\n    <h5>Available Cities</h5>\n    <ul v-if=\"availableCities\">\n      <li v-for=\"city in availableCities\" v-bind:key=\"city\" v-on:click=\"transferArrayValue(availableCities, selectedCities, city)\">\n        {{city}}\n      </li>\n    </ul>\n\n    <h5>Selected Genres</h5>\n    <ul v-if=\"selectedGenres\">\n      <li v-for=\"genre in selectedGenres\" v-bind:key=\"genre\" v-on:click=\"transferArrayValue(selectedGenres, availableGenres, genre)\">\n        {{genre}}\n      </li>\n    </ul>\n\n    <h5>Available Genres</h5>\n    <ul v-if=\"availableGenres\">\n      <li v-for=\"genre in availableGenres\" v-bind:key=\"genre\" v-on:click=\"transferArrayValue(availableGenres, selectedGenres, genre)\">\n        {{genre}}\n      </li>\n    </ul>\n\n    <h2>Events Data:</h2>\n    <p>THIS component's spotify state: {{ spotifyStateString }}</p>\n\n    <div v-if=\"localEvents\">\n      {{localEvents}}\n    </div>\n\n    <div v-if=\"topTracks\">\n      {{topTracks.length}}\n    </div>\n\n    <div v-if=\"artistIDs\">\n      <button v-on:click=\"buildPlaylist('Spooky Title', 'Spooooky Description!')\">Build Playlist</button>\n    </div>\n\n    <h2>Playlist Status:</h2>\n    <h2 v-if=\"playlistStatus\">{{playlistStatus}}</h2>\n\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Vue from \"vue\";\nimport Vuex from \"vuex\";\nimport createPersistedState from \"vuex-persistedstate\";\n\nVue.use()\n\nconst store = new Vuex.Store({\n  plugins: [createPersistedState()]\n});\n\nexport default {\n  name: 'home',\n  data () {\n    return {\n      localEvents: null,\n      playlistStatus: null,\n      spotifyAuthenticationUrl: null,\n      spotifyStateString: null,\n      selectedCities: null,\n      availableCities: null,\n      selectedGenres: null,\n      availableGenres: null,\n      topTracks: null,\n      artistIDs: null\n    }\n  },\n  mounted () {\n    this.setNewSpotifyAuthenticationUrl();\n    this.getAvailableCities();\n    this.getAvailableGenres();\n  },\n  methods: {\n    transferArrayValue: function(sourceArray, targetArray, value) {\n      var index = sourceArray.indexOf(value);\n      if (index > -1) {\n        if (!(targetArray == this.selectedCities && targetArray.length == 6) && \n        !(targetArray == this.selectedGenres && targetArray.length == 10)) {\n          sourceArray.splice(index, 1);\n          targetArray.push(value);\n        }\n      }\n\n      if (this.selectedCities.length != 0 && this.selectedGenres.length != 0) {\n        this.getLocalEvents(this.selectedCities, this.selectedGenres);\n      } else {\n        this.localEvents = null;\n      }\n    },\n    getAvailableCities: function() {\n      var citiesURL = \"http://localhost:8081/cities\";\n\n      axios.get(citiesURL)\n        .then((response => {\n          this.availableCities = response.data;\n          this.selectedCities = new Array();\n        }));\n    },\n    getAvailableGenres: function() {\n      var genresURL = \"http://localhost:8081/genres\";\n\n      axios.get(genresURL)\n        .then((response => {\n          this.availableGenres = response.data;\n          this.selectedGenres = new Array();\n        }));\n    },\n    getLocalEvents: function (cities, genres) {\n      var cityString = this.arrayToQueryString(cities);\n      var genreString = this.arrayToQueryString(genres);\n\n      var localEventsURL = \"http://localhost:8081/localevents?cities=\" +\n      cityString +\n      \"&genres=\" +\n      genreString;\n\n      axios.get(localEventsURL)\n        .then((response => {\n          this.localEvents = response.data;\n          this.getArtistIDs(this.localEvents);\n        }));\n    },\n    setNewSpotifyAuthenticationUrl: function() {\n      this.spotifyStateString = this.getRandomStateString()\n\n      var getAuthenticationRequestUrl = \"http://localhost:8081/authenticate?state=\"\n      +  this.spotifyStateString;\n\n      axios.get(getAuthenticationRequestUrl)\n        .then(response => {\n          this.spotifyAuthenticationUrl = response.data;\n        })\n    },\n    getRandomStateString: function() {\n      return Math.random().toString(36).substring(2,15) + Math.random().toString(36).substring(2,15)\n    },\n    redirectToURL: function() {\n      window.location = this.spotifyAuthenticationUrl;\n    },\n    arrayToQueryString: function (array) {\n      var queryString = '[';\n\n      for (var i = 0; i < array.length; i++) {\n        queryString = queryString.concat(array[i] + ',');\n      }\n\n      queryString = queryString.slice(0, -1).concat(']');\n      return queryString;\n    },\n    getArtistIDs: function(events) {\n      var artistIDsURL = \"http://localhost:8081/artistids\";\n\n      axios.post(artistIDsURL, JSON.stringify(events))\n        .then((response => {\n          this.artistIDs = response.data;\n        }));\n    },\n    buildPlaylist: function (name, desc) {\n      var topTracksURL = \"http://localhost:8081/toptracks\";\n      var buildPlaylistURL = \"http://localhost:8081/buildplaylist?name=\" +\n        name +\n        \"&desc=\" +\n        desc;\n\n      axios.post(topTracksURL, JSON.stringify(this.artistIDs))\n        .then((response => {\n          this.topTracks = response.data;\n          axios.post(buildPlaylistURL, JSON.stringify(response.data))\n            .then((response => {\n              this.playlistStatus = response.status;\n          }));\n        }));\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"]}]}